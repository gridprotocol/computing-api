# 开发文档

记录开发情况与待办。

## v0.1

目标：设计、实现大致框架。能够运行起一个demo走一趟较为完整的流程。

核心：计算层主要做

- 验证、授权。
- 部署服务、转发请求和响应（k8s部署的计算群）。

暂时不考虑：

- 结算层（区块链），所有相关接口直接返回预设结果跳过该段流程。
- 验证的完整逻辑，只简单检查是否完成了授权申请。
- 复杂的部署、转发逻辑，目前先支持较为固定的部署和转发，保证服务能够初步走通。
- 用户层中的前端、平台部分只需要保证主要流程运行起来，其他功能和信息补全、优化放到后续工作。

预期展示效果：

用户能够在页面上发起请求完成与计算节点的“租约签订”并获得授权（走流程，不考虑内部细节），部署一个指定服务，且后续能够访问服务的根路径页面。这些内容全部都能够以某种形式在前端页面上展示出来。

## v0.2（待开始）

目标：功能和信息补全。

核心：

- 计算层：验证的完整逻辑，以及复杂的转发逻辑。加上cache完成一些访问加速。
- 用户层：补全其他辅助使用的功能和信息。

暂时不考虑：

- 结算层（区块链），所有相关接口直接返回预设结果跳过该段流程。但可以开始设计一个初步合约。
- 更灵活的部署方式。

预期展示效果：

更完整且友好的前端页面，能够保证验证流程的完整度，且能够完整地使用部署的服务。

## v0.3（暂时用于记录后面再考虑的工作）

转发相关：

- 转发的方式除了cookie验证外，增加临时URL页面支持。
- cookie的有效期、保存与验证方式优化。

其他：

- 链合约的设计实现，验证和使用。
- 多个部署镜像或部署文件。灵活的部署方式（参数或yaml）。
- 走完一套预想的完整流程，保证能够初步开放使用。

## 后续考虑

1. 计算层安全访问的问题：限制http的数据长度、加访问cache避免重复检查。
2. 用户友好：根据用户filter的需求（资源、价格等），为用户筛选出符合要求的计算节点。自动对这些节点依次走 `greet` 的流程，第一个能走通的就完成租用。