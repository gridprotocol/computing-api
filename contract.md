# 合约相关定义

## 激励合约

通过质押获取质押释放收益，用于吸引用户和资金进入。

可以完全使用Memo的那一套质押合约逻辑，不需要改动。后期可以与节点服务次数结合来实现控制收益或释放速度。

## 核心合约

为了保证计算框架的正确运作，需要在区块链层部署具有核心功能的合约（或类似逻辑）。

链这一层的主要要求就是：

1. 能有方式去记录与读取内容。
2. 有办法做到代币随时间释放的执行逻辑。

目前EVM合约能够支持这些要求。如果其他链也可以达到类似的效果，那也可以使用其他链接入。

### CP合约

计算节点（computing provider）注册、登记节点的资源。后续也可以增加评分等信用机制。

是一个总合约，记录所有的计算节点。用一个`map`形式的结构记录，地址为`key`：

- 价格定位
- 资源量
- 其他扩展（如评分）

该合约不需要有复杂的执行逻辑，只需要承担记录的作用。`value`值不一定为具体的数据，也可以采用其他合约或拓展到其他存储网络（如MEFS/IPFS）上，用`URI`指向具体的数据。

计算节点需要发交易到链上完成注册。

### 租赁合约

约束用户与CP节点行为的租赁订单（Lease）。目前可以先做单份，后续再考虑扩展或多份。

需要记录：

- 租用的资源量
- 质押的代币
- 租期长度/试用期长度

其中后两者结合后，可做释放相关的执行逻辑。保证双方的权益。

另外还需要额外考虑的一点：为了避免女巫攻击（gas费很低的时候该攻击成本也会很低），或者用户无限制地滥用试用期，还得增加一些门槛机制，具体方式后续再考虑（可能用小额质押、信用机制等）。

### 工厂合约？

还未完全确定。有工厂合约可以用于生成模板化的租赁合约，方便验证。

而且有两种方式：

1. 用户生成合约，cp节点验证。
2. cp节点生成合约，用户登记使用。

不过还需要考虑一些使用过程中的问题。估计用方式2，也可以减少合约的生成量并配合信用机制。
