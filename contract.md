# 合约相关定义

链这一层的主要要求就是：

1. 能有方式去记录与读取内容。
2. 有办法做到代币随时间释放的执行逻辑。

目前EVM合约能够支持这些要求。如果其他链也可以达到类似的效果，那也可以使用其他链接入。

## CP合约

计算节点（computing provider）注册、登记节点的资源。后续也可以增加评分等信用机制。

是一个总合约，记录所有的计算节点。用一个`map`形式的结构记录，地址为`key`：

- 价格定位
- 资源量
- 其他扩展（如评分）

该合约不需要有复杂的执行逻辑，只需要承担记录的作用。`value`值不一定为具体的数据，也可以采用其他合约或拓展到其他存储网络（如MEFS/IPFS）上，用`URI`指向具体的数据。

计算节点需要发交易到链上完成注册。

## 租赁合约

约束用户与CP节点行为的租赁订单（Lease）。目前先做单份，后续再考虑扩展或多份。

需要记录：

- 租用的资源量
- 质押的代币
- 租期长度/试用期长度

其中后两者结合后，可做释放相关的执行逻辑。保证双方的权益。

## 工厂合约？

还未完全确定。有工厂合约可以用于生成模板化的租赁合约，方便验证。

而且有两种方式：

1. 用户生成合约，cp节点验证。
2. cp节点生成合约，用户登记使用。

不过还需要考虑一些使用过程中的问题。
